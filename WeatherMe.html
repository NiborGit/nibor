<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
<script>
var app = {
            getRows : function() {                                
                var vZip = $('#textZip').val();                
                var restURL = "http://api.openweathermap.org/data/2.5/weather?zip="+vZip+",us&units=imperial&appid=6e37154c8242124ca81adf207e987814";    
                $.ajax({ type: "GET", 	                  
                    url: restURL,             
                    contentType: "application/json;",
                    async: "false",
                    dataType: "json",
                headers: {
                        "ACCEPT":"application/json"
                },                       
                error: function(error) {
                    var err = error.responseJSON;                     
                   $('#msg').html(err );                 
                },
                success: function(data, status){ 
                        var obj = data;                                   
                    $('#ResultsDiv').html(obj.name);
                    $('#ResultsDiv').append("<br>current temp is " +obj.main.temp );
                    $('#ResultsDiv').append("<br>current conditions " + obj.weather[0].main + "(" + obj.weather[0].description +")" );
                    $('#ResultsDiv').append("<br>min temp of : "+obj.main.temp_min);
                    $('#ResultsDiv').append("<br>max temp of : "+obj.main.temp_max);
                    $('#ResultsDiv').append("<br>air pressure: "+ obj.main.pressure);
                    $('#ResultsDiv').append("<br>humidity    : " + obj.main.humidity);
                    $('#ResultsDiv').append("<br>wind speed  : " + obj.wind.speed);
                    $('#ResultsDiv').append("<br>country     : " + obj.sys.country);
                    $('#ResultsDiv').append("<br>location    : " + obj.coord.lat + ","+obj.coord.lon);
                    //$('#ResultsDiv').append("<br><a href=\"https://www.google.com/maps/search/?api=1&query="+ obj.coord.lat + ","+ obj.coord.lon + ",12z\"" + "> Google Maps</a>")
                    $('#ResultsDiv').append("<br><a id=\"gMapLink\" href=\"http://www.google.com/maps/place/" + obj.coord.lat + ","+ obj.coord.lon + "/@"+ obj.coord.lat + ","+ obj.coord.lon + ",10z\"" + "> Google Maps</a>")
                    
                }
            });
            },
      stChange : function(){
             var selZip = $('#selectZip').val();
            $('#textZip').val(selZip);
      },      
      start : function() {
        var self = this;              
      }
 }
 function init(){
    $.support.cors = true; 
    var obj = Object.create(app);        
    app.start();
    app.getRows();

 }    
  </script>
        
</head>
<body onload="init();">
    <input type="text" value="04061" id="textZip"> <br>
    <select id="selectZip" onchange="app.stChange();app.getRows();">
<option value="36104"> Alabama AL </option>
<option value="99801"> Alaska AK </option>
<option value="85001"> Arizona AZ </option>
<option value="72201"> Arkansas AR </option>
<option value="95814"> California CA </option>
<option value="80202"> Colorado CO </option>
<option value="06103"> Connecticut CT </option>
<option value="19901"> Delaware DE </option>
<option value="32301"> Florida FL </option>
<option value="30303"> Georgia GA </option>
<option value="96813"> Hawaii HI </option>
<option value="83702"> Idaho ID </option>
<option value="62701"> Illinois IL </option>
<option value="46225"> Indiana IN </option>
<option value="50309"> Iowa IA </option>
<option value="66603"> Kansas KS </option>
<option value="40601"> Kentucky KY </option>
<option value="70802"> Louisiana LA </option>
<option value="04330"> Maine ME </option>
<option value="21401"> Maryland MD </option>
<option value="02201"> Massachusetts MA </option>
<option value="48933"> Michigan MI </option>
<option value="55102"> Minnesota MN </option>
<option value="39205"> Mississippi MS </option>
<option value="65101"> Missouri MO </option>
<option value="59623"> Montana MT </option>
<option value="68502"> Nebraska NE </option>
<option value="89701"> Nevada NV </option>
<option value="03301"> New Hampshire NH </option>
<option value="08608"> New Jersey NJ </option>
<option value="87501"> New Mexico NM </option>
<option value="12207"> New York NY </option>
<option value="27601"> North Carolina NC </option>
<option value="58501"> North Dakota ND </option>
<option value="43215"> Ohio OH </option>
<option value="73102"> Oklahoma OK </option>
<option value="97301"> Oregon OR </option>
<option value="17101"> Pennsylvania PA </option>
<option value="02903"> Rhode Island RI </option>
<option value="29217"> South Carolina SC </option>
<option value="57501"> South Dakota SD </option>
<option value="37219"> Tennessee TN </option>
<option value="78701"> Texas TX </option>
<option value="84111"> Utah UT </option>
<option value="05602"> Vermont VT </option>
<option value="23219"> Virginia VA </option>
<option value="98507"> Washington WA </option>
<option value="25301"> West Virginia WV </option>
<option value="53703"> Wisconsin WI </option>
<option value="82001"> Wyoming WY </option>
<option value="96799"> American Samoa AS </option>
<option value="20001"> District of Columbia DC </option>
<option value="96941"> Federated States of Micronesia FM </option>
<option value="96910"> Guam GU </option>
<option value="96960"> Marshall Islands MH </option>
<option value="96950"> Northern Mariana Islands MP </option>
<option value="96939"> Palau PW </option>
<option value="00901"> Puerto Rico PR </option>
<option value="00802"> Virgin Islands VI </option>
    </select><br>
    <input type="button" value="WeatherMe" onclick="app.getRows()">
    <br>
    <div id="ResultsDiv"></div>
    <hr>
    <div id="msg"></div>
    <div>
     <a href="http://en.wikipedia.org/wiki/List_of_ZIP_Code_prefixes">
    For ZIP reference</a><br>
    </div>
        <script src="/nibor/js/jquery.min.js" type="text/javascript" ></script>    
</body>
</html>
